{"ast":null,"code":"var _jsxFileName = \"/Users/ishankanodia/Desktop/att/innnovation-lab/frontend/src/AttendanceTable.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport './AttendanceTable.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AttendanceTable = () => {\n  _s();\n  const [attendanceData, setAttendanceData] = useState([]);\n  const [isAttendanceReady, setIsAttendanceReady] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Function to handle file upload\n  const handleFileUpload = file => {\n    const formData = new FormData();\n    formData.append('file', file);\n    setIsLoading(true); // Show loading while uploading\n    fetch('http://localhost:3001/upload', {\n      method: 'POST',\n      body: formData\n    }).then(response => response.json()).then(() => {\n      setIsAttendanceReady(true); // Fetch attendance after upload completes\n    }).catch(error => {\n      console.error('Error uploading file:', error);\n      setIsAttendanceReady(false);\n    }).finally(() => setIsLoading(false));\n  };\n\n  // Function to handle image capture from Raspberry Pi\n  const handleCaptureImage = () => {\n    setIsLoading(true); // Show loading while capturing\n    fetch('http://localhost:3001/capture', {\n      method: 'POST'\n    }).then(response => response.json()).then(() => {\n      setIsAttendanceReady(true); // Fetch attendance after capture completes\n    }).catch(error => {\n      console.error('Error capturing image:', error);\n      setIsAttendanceReady(false);\n    }).finally(() => setIsLoading(false));\n  };\n\n  // Fetch attendance data from the backend only after upload/capture is complete\n  useEffect(() => {\n    if (isAttendanceReady) {\n      setIsLoading(true); // Show loading while fetching\n      fetch(`http://localhost:3001/api/attendance`).then(response => response.json()).then(data => {\n        setAttendanceData(data.attendance);\n      }).catch(error => {\n        console.error('Error fetching attendance data:', error);\n      }).finally(() => setIsLoading(false));\n    }\n  }, [isAttendanceReady]);\n  const renderTableHeader = () => {\n    if (attendanceData.length === 0) {\n      return null;\n    }\n\n    // Extract unique dates from the attendance data\n    const uniqueDates = [...new Set(attendanceData.map(item => item.date))];\n    return /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n        children: \"Student\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), uniqueDates.map((date, index) => /*#__PURE__*/_jsxDEV(\"th\", {\n        children: date\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  };\n  const renderTableRows = () => {\n    if (attendanceData.length === 0) {\n      return null;\n    }\n\n    // Group attendance data by student\n    const groupedByStudent = {};\n    attendanceData.forEach(record => {\n      const {\n        name,\n        date,\n        present\n      } = record;\n      if (!groupedByStudent[name]) {\n        groupedByStudent[name] = {};\n      }\n      groupedByStudent[name][date] = present; // Mark attendance for specific dates\n    });\n\n    // Extract unique dates for each student\n    const uniqueDates = [...new Set(attendanceData.map(item => item.date))];\n    return Object.keys(groupedByStudent).map((studentName, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: studentName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), uniqueDates.map((date, idx) => /*#__PURE__*/_jsxDEV(\"td\", {\n        className: groupedByStudent[studentName][date] ? 'present' : 'absent',\n        children: groupedByStudent[studentName][date] ? 'Present' : 'Absent'\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this))]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"attendance-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Day-wise Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        onChange: e => handleFileUpload(e.target.files[0]),\n        disabled: isLoading // Disable file input while loading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCaptureImage,\n        disabled: isLoading,\n        children: \"Capture Photo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"attendance-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: attendanceData.length > 0 && renderTableHeader()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: attendanceData.length > 0 ? renderTableRows() : /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: /*#__PURE__*/_jsxDEV(\"td\", {\n            colSpan: \"100%\",\n            children: \"No attendance data available\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n};\n_s(AttendanceTable, \"TYi5fZJ7y5tOklSn+sJyuKILOb0=\");\n_c = AttendanceTable;\nexport default AttendanceTable;\nvar _c;\n$RefreshReg$(_c, \"AttendanceTable\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","AttendanceTable","_s","attendanceData","setAttendanceData","isAttendanceReady","setIsAttendanceReady","isLoading","setIsLoading","handleFileUpload","file","formData","FormData","append","fetch","method","body","then","response","json","catch","error","console","finally","handleCaptureImage","data","attendance","renderTableHeader","length","uniqueDates","Set","map","item","date","children","fileName","_jsxFileName","lineNumber","columnNumber","index","renderTableRows","groupedByStudent","forEach","record","name","present","Object","keys","studentName","idx","className","type","onChange","e","target","files","disabled","onClick","colSpan","_c","$RefreshReg$"],"sources":["/Users/ishankanodia/Desktop/att/innnovation-lab/frontend/src/AttendanceTable.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport './AttendanceTable.css';\n\nconst AttendanceTable = () => {\n  const [attendanceData, setAttendanceData] = useState([]);\n  const [isAttendanceReady, setIsAttendanceReady] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Function to handle file upload\n  const handleFileUpload = (file) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    \n    setIsLoading(true); // Show loading while uploading\n    fetch('http://localhost:3001/upload', {\n      method: 'POST',\n      body: formData,\n    })\n      .then((response) => response.json())\n      .then(() => {\n        setIsAttendanceReady(true); // Fetch attendance after upload completes\n      })\n      .catch((error) => {\n        console.error('Error uploading file:', error);\n        setIsAttendanceReady(false);\n      })\n      .finally(() => setIsLoading(false));\n  };\n\n  // Function to handle image capture from Raspberry Pi\n  const handleCaptureImage = () => {\n    setIsLoading(true); // Show loading while capturing\n    fetch('http://localhost:3001/capture', {\n      method: 'POST',\n    })\n      .then((response) => response.json())\n      .then(() => {\n        setIsAttendanceReady(true); // Fetch attendance after capture completes\n      })\n      .catch((error) => {\n        console.error('Error capturing image:', error);\n        setIsAttendanceReady(false);\n      })\n      .finally(() => setIsLoading(false));\n  };\n\n  // Fetch attendance data from the backend only after upload/capture is complete\n  useEffect(() => {\n    if (isAttendanceReady) {\n      setIsLoading(true); // Show loading while fetching\n      fetch(`http://localhost:3001/api/attendance`)\n        .then((response) => response.json())\n        .then((data) => {\n          setAttendanceData(data.attendance);\n        })\n        .catch((error) => {\n          console.error('Error fetching attendance data:', error);\n        })\n        .finally(() => setIsLoading(false));\n    }\n  }, [isAttendanceReady]);\n\n  const renderTableHeader = () => {\n    if (attendanceData.length === 0) {\n      return null;\n    }\n  \n    // Extract unique dates from the attendance data\n    const uniqueDates = [...new Set(attendanceData.map(item => item.date))];\n  \n    return (\n      <tr>\n        <th>Student</th>\n        {uniqueDates.map((date, index) => (\n          <th key={index}>{date}</th>\n        ))}\n      </tr>\n    );\n  };\n  \n  const renderTableRows = () => {\n    if (attendanceData.length === 0) {\n      return null;\n    }\n  \n    // Group attendance data by student\n    const groupedByStudent = {};\n    attendanceData.forEach(record => {\n      const { name, date, present } = record;\n      if (!groupedByStudent[name]) {\n        groupedByStudent[name] = {};\n      }\n      groupedByStudent[name][date] = present; // Mark attendance for specific dates\n    });\n  \n    // Extract unique dates for each student\n    const uniqueDates = [...new Set(attendanceData.map(item => item.date))];\n  \n    return Object.keys(groupedByStudent).map((studentName, index) => (\n      <tr key={index}>\n        <td>{studentName}</td>\n        {uniqueDates.map((date, idx) => (\n          <td key={idx} className={groupedByStudent[studentName][date] ? 'present' : 'absent'}>\n            {groupedByStudent[studentName][date] ? 'Present' : 'Absent'}\n          </td>\n        ))}\n      </tr>\n    ));\n  };\n  \n  return (\n    <div className=\"attendance-container\">\n      <h2>Day-wise Attendance</h2>\n      <div className=\"button-group\">\n        <input\n          type=\"file\"\n          onChange={(e) => handleFileUpload(e.target.files[0])}\n          disabled={isLoading} // Disable file input while loading\n        />\n        <button onClick={handleCaptureImage} disabled={isLoading}>\n          Capture Photo\n        </button>\n      </div>\n      {isLoading ? (\n        <p>Loading...</p>\n      ) : (\n        <table className=\"attendance-table\">\n          <thead>{attendanceData.length > 0 && renderTableHeader()}</thead>\n          <tbody>\n            {attendanceData.length > 0 ? (\n              renderTableRows()\n            ) : (\n              <tr>\n                <td colSpan=\"100%\">No attendance data available</td>\n              </tr>\n            )}\n          </tbody>\n        </table>\n      )}\n    </div>\n  );\n};\n\nexport default AttendanceTable;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}